@using HotFlix.Domain.Enums
@using HotFlix.Domain.Models
@model CatalogVM
<!-- page title -->
<section class="section section--first">
	<div class="container">
		<div class="row">
			<div class="col-12">
				<div class="section__wrap">
					<!-- section title -->
					<h1 class="section__title section__title--head">Catalog</h1>
					<!-- end section title -->
					<!-- breadcrumbs -->
					<ul class="breadcrumbs">
						<li class="breadcrumbs__item"><a asp-controller="home" asp-action="index">Home</a></li>
						<li class="breadcrumbs__item breadcrumbs__item--active">Catalog</li>
					</ul>
					<!-- end breadcrumbs -->
				</div>
			</div>
		</div>
	</div>
</section>
<!-- end page title -->
<!-- filter -->
<div class="filter">
	<div class="container">
		<div class="row">
			<div class="col-12">
				<div class="filter__content">
					<!-- menu btn -->
					<button class="filter__menu" type="button"><i class="ti ti-filter"></i>Filter</button>
					<!-- end menu btn -->
					<!-- filter desk -->
					<div class="filter__items">
						<select class="filter__select" onchange="this.form.submit()" asp-for="CategoryId" id="filter__genre">
							@foreach (var category in Model.Categories)
							{

								@if (Model.CategoryId == category.Id)
								{
									<option selected value="@category.Id">@category.Name</option>
								}
								else
								{
									<option value="@category.Id">@category.Name</option>
								}
							}
						</select>

						<select class="filter__select" onchange="this.form.submit()" asp-for="TagId" id="filter__quality">
							@foreach (var tag in Model.Tags)
							{
								@if (Model.TagId == tag.Id)
								{
									<option selected value="@tag.Id">@tag.Name</option>
								}
								else
								{
									<option value="@tag.Id">@tag.Name</option>
								}
							}

						</select>
						<select class="filter__select" onchange="this.form.submit()" name="ratingkey" id="filter__rate">
							
							@foreach (var sort in Enum.GetValues(typeof(RatingSort)))
							{
								if (Model.RatingKey == (int)sort)
								{
									<option selected value="@((int)sort)">Sort @sort.ToString()</option>
								}
								else
								{
									<option value="@((int)sort)">Sort @sort.ToString()</option>
								}
							}
						</select>

						<select class="filter__select" onchange="this.form.submit()" name="timekey" id="filter__sort">
							
							@foreach (var sort in Enum.GetValues(typeof(TimeSort)))
							{
								if (Model.TimeKey == (int)sort)
								{
									<option selected value="@((int)sort)">Sort @sort.ToString()</option>
								}
								else
								{
									<option value="@((int)sort)">Sort @sort.ToString()</option>
								}
							}
						</select>


					</div>
					<!-- end filter desk -->
					<!-- filter btn -->
					<button class="filter__btn" type="button">Apply</button>
					<!-- end filter btn -->
					<!-- amount -->
					<span class="filter__amount">Showing 18 of 1713</span>
					<!-- end amount -->
				</div>
			</div>
		</div>
	</div>
</div>
<!-- end filter -->
<!-- catalog -->
<div class="section section--catalog">
	<div class="container">
		<div class="row">
			@foreach (var movie in Model.Movies)
			{
				<!-- item -->
				<div class="col-6 col-sm-4 col-lg-3 col-xl-2">
					<div class="item">
						<div class="item__cover">
							<img src="~/assets/img/covers/@movie.Image" alt="">
							<a asp-controller="detail" asp-action="index" asp-route-id="@movie.Id" class="item__play">
								<i class="ti ti-player-play-filled"></i>
							</a>
							<span class="item__rate item__rate--green">@movie.Rating</span>
							<button class="item__favorite" type="button"><i class="ti ti-bookmark"></i></button>
						</div>
						<div class="item__content">
							<h3 class="item__title"><a asp-controller="detail" asp-action="index" asp-route-id="@movie.Id">@movie.Name</a></h3>
							@* 	<span class="item__category">
												@foreach (var tag in Model.FirstOrDefault(m => m.Id == movie.Id).MovieTags)
												{
													<a href="#">@tag.Tag.Name</a>
												}
											</span> *@
						</div>
					</div>
				</div>
				<!-- end item -->
			}

		</div>

		<div class="row">
			<!-- paginator -->
			<div class="col-12">
				<!-- paginator mobile -->
				<div class="paginator-mob">
					<span class="paginator-mob__pages">18 of 1713</span>

					<ul class="paginator-mob__nav">
						<li>
							<a href="#">
								<i class="ti ti-chevron-left"></i>
								<span>Prev</span>
							</a>
						</li>
						<li>
							<a href="#">
								<span>Next</span>
								<i class="ti ti-chevron-right"></i>
							</a>
						</li>
					</ul>
				</div>
				<!-- end paginator mobile -->
				<!-- paginator desktop -->
				<ul class="paginator">
					<li class="paginator__item paginator__item--prev">
						<a href="#"><i class="ti ti-chevron-left"></i></a>
					</li>
					<li class="paginator__item"><a href="#">1</a></li>
					<li class="paginator__item paginator__item--active"><a href="#">2</a></li>
					<li class="paginator__item"><a href="#">3</a></li>
					<li class="paginator__item"><a href="#">4</a></li>
					<li class="paginator__item"><span>...</span></li>
					<li class="paginator__item"><a href="#">87</a></li>
					<li class="paginator__item paginator__item--next">
						<a href="#"><i class="ti ti-chevron-right"></i></a>
					</li>
				</ul>
				<!-- end paginator desktop -->
			</div>
			<!-- end paginator -->
		</div>
	</div>
</div>
<!-- end catalog -->
<!-- section -->
<section class="section section--border">
	<div class="container">
		<div class="row">
			<!-- section title -->
			<div class="col-12">
				<div class="section__title-wrap">
					<h2 class="section__title">Expected premiere</h2>
					<a asp-controller="catalog" asp-action="index" class="section__view section__view--carousel">View All</a>
				</div>
			</div>
			<!-- end section title -->
			<!-- carousel -->
			<div class="col-12">
				<div class="section__carousel splide splide--content">
					<div class="splide__arrows">
						<button class="splide__arrow splide__arrow--prev" type="button">
							<i class="ti ti-chevron-left"></i>
						</button>
						<button class="splide__arrow splide__arrow--next" type="button">
							<i class="ti ti-chevron-right"></i>
						</button>
					</div>
					<div class="splide__track">
						<ul class="splide__list">
							@foreach (var movie in Model.Movies.OrderBy(m=>m.Premiere))
							{
								<li class="splide__slide">
									<div class="item item--hero">
										<div class="item__cover">
											<img src="~/assets/img/covers/@movie.Image" alt="">
											<a asp-controller="detail" asp-action="index" asp-route-id="@movie.Id" class="item__play">
												<i class="ti ti-player-play-filled"></i>
											</a>
											<span class="item__rate item__rate--green">@movie.Rating</span>
											<button class="item__favorite" type="button"><i class="ti ti-bookmark"></i></button>
										</div>
										<div class="item__content">
											<h3 class="item__title"><a asp-controller="detail" asp-action="index" asp-route-id="@movie.Id">@movie.Name</a></h3>
										@* 	<span class="item__category">
												@foreach (var tag in Model.FirstOrDefault(m => m.Id == movie.Id).MovieTags)
												{
													<a href="#">@tag.Tag.Name</a>
												}
											</span> *@
										</div>

									</div>
								</li>
							}

						</ul>
					</div>
				</div>
			</div>
			<!-- end carousel -->
		</div>
	</div>
</section>
<!-- end section -->
